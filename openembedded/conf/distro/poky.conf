#@TYPE: Distribution
#@NAME: Poky
#@DESCRIPTION: Distribution configuration for OpenedHand (Poky)

DISTRO = "poky"
DISTRO_NAME = "OpenedHand Linux (Poky)"
DISTRO_VERSION = "0.0-snapshot-${DATE}"

# DISTRO_VERSION = "3.5.4"
DISTRO_TYPE = "debug"
# DISTRO_TYPE = "release"


INHERIT += " package_ipk debian"
# For some reason, this doesn't work
# TARGET_OS ?= "linux"
TARGET_OS = "linux"
TARGET_FPU ?= "soft"

PARALLEL_INSTALL_MODULES = "1"

FEED_URIS += " \
           upgrades##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/upgrades/ \
upgrades-${MACHINE}##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/upgrades/${MACHINE} \
            machine##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/machine/${MACHINE} \
               base##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/base/ \
               libs##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/libs/ \
            console##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/console \
              devel##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/devel"

ASSUME_PROVIDED += "virtual/arm-linux-gcc-2.95"
OEINCLUDELOGS = "yes"
KERNEL_CONSOLE = "ttyS0"
#DEBUG_OPTIMIZATION = "-O -g3"
#DEBUG_BUILD = "1"
#INHIBIT_PACKAGE_STRIP = "1"


#
# Core Versions
#
PREFERRED_VERSION_binutils-cross = "2.15.94.0.1"
PREFERRED_VERSION_gcc-cross ?= "3.4.4"
PREFERRED_VERSION_gcc-cross-initial ?= "3.4.4"
PREFERRED_VERSION_hostap-modules ?= "0.3.9"


#
# Opie and E Image preferred verions
# Use our own instead of GPE
#
OPIE_VERSION = "1.2.1"
include conf/distro/preferred-opie-versions.inc
#include conf/distro/preferred-e-versions.inc


#
# Preferred providers:
#
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}gcc-initial:gcc-cross-initial"
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}gcc:gcc-cross"
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}g++:gcc-cross"
PREFERRED_PROVIDERS += " virtual/libqpe:libqpe-opie"
#fix some iconv issues, needs to be adjusted when doing uclibc builds
PREFERRED_PROVIDER_virtual/libiconv=glibc
PREFERRED_PROVIDER_virtual/libintl=glibc
PREFERRED_PROVIDERS += "virtual/xserver:xserver-kdrive"
PREFERRED_PROVIDER_x11 = "diet-x11"
#PREFERRED_PROVIDER_gconf=gconf-dbus
PREFERRED_PROVIDER_gnome-vfs=gnome-vfs-dbus


#
# CVS Dates to use:
#
CVSDATE_minimo=20050401
CVSDATE_ipkg-utils-native = "20050930"
CVSDATE_ipkg-link-1 = "20050930"
CVSDATE_ipkg-utils = "20050930"
CVSDATE_ipkg-link = "20050930"
CVSDATE_matchbox-common = "20051101"
CVSDATE_matchbox-config-gtk = "20051101"
CVSDATE_matchbox-desktop = "20051101"
CVSDATE_matchbox-keyboard = "20051101"
CVSDATE_matchbox-panel = "20051101"
CVSDATE_matchbox-panel-manager = "20051101"
CVSDATE_matchbox-stroke = "20051101"
CVSDATE_matchbox-themes-extra = "20051101"
CVSDATE_matchbox-wm = "20051101"
CVSDATE_libmatchbox = "20051101"
CVSDATE_tslib = "20051101"
CVSDATE_xext = "20051101"
CVSDATE_renderext = "20051101"
CVSDATE_libxrender = "20051101"
CVSDATE_fixesext = "20051101"
CVSDATE_damageext = "20051101"
CVSDATE_compositeext = "20051101"
CVSDATE_xcalibrateext = "20051101"
CVSDATE_recordext = "20051101"
CVSDATE_libfakekey = "20051101"
CVSDATE_xmodmap = "20051101"
CVSDATE_xrandr = "20051101"
CVSDATE_xtst = "20051101"
CVSDATE_xcalibrate = "20051101"
CVSDATE_xmu = "20051115"
CVSDATE_xdpyinfo = "20051115"

#
# Preferred Versions:
#
PREFERRED_VERSION_matchbox = "0.9.1"
PREFERRED_VERSION_matchbox-applet-inputmanager = "0.6"
PREFERRED_VERSION_matchbox-applet-startup-monitor = "0.1"
PREFERRED_VERSION_matchbox-common = "0.9.1+cvs-${CVSDATE}"
PREFERRED_VERSION_matchbox-config-gtk = "0.0+cvs-${CVSDATE}"
PREFERRED_VERSION_matchbox-desktop = "0.9.1+cvs-${CVSDATE}"
PREFERRED_VERSION_matchbox-keyboard = "0.0+cvs-${CVSDATE}"
PREFERRED_VERSION_matchbox-panel = "0.9.2+cvs-${CVSDATE}"
PREFERRED_VERSION_matchbox-stroke = "0.0+cvs-${CVSDATE}"
PREFERRED_VERSION_matchbox-themes-extra = "0.3+cvs-${CVSDATE}"
PREFERRED_VERSION_matchbox-wm = "0.9.5+cvs-${CVSDATE}"
PREFERRED_VERSION_libmatchbox = "1.7+cvs-${CVSDATE}"

PREFERRED_VERSION_atk = "1.10.0"
PREFERRED_VERSION_cairo = "1.0.0"
PREFERRED_VERSION_glib-2.0 = "2.8.1"
PREFERRED_VERSION_gtk+ = "2.6.7"
PREFERRED_VERSION_pango = "1.10.0"

PREFERRED_VERSION_dbus = "0.50"

PREFERRED_VERSION_diet-x11 ?= "6.2.1"
PREFERRED_VERSION_dillo2 ?= "0.6.6"
PREFERRED_VERSION_evince ?= "0.3.2"
PREFERRED_VERSION_firefox ?= "1.0"
PREFERRED_VERSION_gaim ?= "2.0.0-cvs-mco1-20050904"
PREFERRED_VERSION_gtk2-theme-angelistic ?= "0.3"
PREFERRED_VERSION_gsoko ?= "0.4.2-gpe6"
PREFERRED_VERSION_keylaunch ?= "2.0.7"
PREFERRED_VERSION_librsvg ?= "2.6.5"
PREFERRED_VERSION_libgpewidget ?= "0.103"
PREFERRED_VERSION_libgpepimc ?= "0.5"
PREFERRED_VERSION_libgpevtype ?= "0.12"
PREFERRED_VERSION_libgsm ?= "1.0.10"
PREFERRED_VERSION_libschedule ?= "0.15"
PREFERRED_VERSION_linphone-hh ?= "0.12.2.hh1"
PREFERRED_VERSION_linphone ?= "0.12.2"
PREFERRED_VERSION_minilite ?= "0.49"
PREFERRED_VERSION_minimo ?= "0.0cvs${CVSDATE_minimo}"
PREFERRED_VERSION_poppler ?= "0.3.3"
PREFERRED_VERSION_rosetta ?= "0.0cvs${CVSDATE}"
PREFERRED_VERSION_rxvt-unicode ?= "5.3"
PREFERRED_VERSION_xcursor-transparent-theme ?= "0.1.1"
PREFERRED_VERSION_xdemineur ?= "2.1.1"
PREFERRED_VERSION_xhost ?= "0.0cvs20040413"
PREFERRED_VERSION_xmonobut ?= "0.4"
PREFERRED_VERSION_xprop ?= "0.0cvs${CVSDATE}" 
PREFERRED_VERSION_xproto ?= "6.6.2"
PREFERRED_VERSION_xrdb ?= "0.0cvs${CVSDATE}"
PREFERRED_VERSION_xst ?= "0.15"


