#@TYPE: Distribution#@NAME: Poky
#@DESCRIPTION: Distribution configuration for OpenedHand (Poky)

DISTRO = "poky"
DISTRO_NAME = "OpenedHand Linux (Poky)"
DISTRO_VERSION = "0.0-snapshot-${DATE}"

DISTRO_TYPE ?= "release"

MAINTAINER = "OpenedHand <poky@openedhand.com>"

PACKAGE_CLASSES ?= "package_ipk"
INHERIT += " ${PACKAGE_CLASSES} debian multimachine poky devshell "
# For some reason, this doesn't work
# TARGET_OS ?= "linux"
TARGET_OS = "linux"
TARGET_FPU_arm ?= "soft"
TARGET_FPU_armeb ?= "soft"
IMAGE_ROOTFS_SIZE_ext2 = 131072

PARALLEL_INSTALL_MODULES = "1"

#FEED_URIS += " \
#           upgrades##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/upgrades/ \
#upgrades-${MACHINE}##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/upgrades/${MACHINE} \
#            machine##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/machine/${MACHINE} \
#               base##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/base/ \
#               libs##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/libs/ \
#            console##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/console \
#              devel##http://openzaurus.org/official/unstable/${DISTRO_VERSION}/feed/devel"

ASSUME_PROVIDED += "virtual/arm-linux-gcc-2.95"
OEINCLUDELOGS = "yes"
KERNEL_CONSOLE = "ttyS0"
#DEBUG_OPTIMIZATION = "-O -g3"
#DEBUG_BUILD = "1"
#INHIBIT_PACKAGE_STRIP = "1"

POKYMODE ?= "oabi"

require conf/distro/include/poky-${POKYMODE}.inc

#
# Preferred providers:
#
# Toolchain:
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}gcc-initial:gcc-cross-initial"
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}gcc:gcc-cross"
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}g++:gcc-cross"

# Libc/uclibc:
#fix some iconv issues, needs to be adjusted when doing uclibc builds
PREFERRED_PROVIDER_virtual/libiconv ?= glibc
PREFERRED_PROVIDER_virtual/libintl ?= glibc

# Virtuals:
PREFERRED_PROVIDER_virtual/db ?= "db"
PREFERRED_PROVIDER_virtual/db-native ?= "db-native"
PREFERRED_PROVIDER_virtual/xserver ?= xserver-kdrive
PREFERRED_PROVIDER_virtual/update-alternatives ?= update-alternatives-cworth
PREFERRED_PROVIDER_virtual/update-alternatives-native ?= update-alternatives-cworth-native

# Others:
PREFERRED_PROVIDER_libx11 ?= "diet-x11"
PREFERRED_PROVIDER_gconf ?= gconf-dbus
PREFERRED_PROVIDER_gnome-vfs ?= gnome-vfs-dbus
PREFERRED_PROVIDER_tslib ?= tslib


#
# CVS Dates to use:
#
#SRCDATE_gnome-vfs-dbus ?= "20051215"
SRCDATE_gconf-dbus ?= "20060119"
SRCDATE_gnome-vfs-dbus ?= "20060119"
SRCDATE_contacts ?= "20060707"
SRCDATE_dates ?= "20060721"
SRCDATE_gtkhtml2 ?= "20060323"
SRCDATE_web ?= "20060613"
SRCDATE_eds-dbus ?= "20060707"
SRCDATE_minimo ?= "20050401"
SRCDATE_ipkg-utils-native ?= "20050930"
SRCDATE_ipkg-link-1 ?= "20050930"
SRCDATE_ipkg-utils ?= "20050930"
SRCDATE_ipkg-link ?= "20050930"
SRCDATE_matchbox-common ?= "20060612"
SRCDATE_matchbox-config-gtk ?= "20060612"
SRCDATE_matchbox-desktop ?= "20060612"
SRCDATE_matchbox-keyboard ?= "20060612"
SRCDATE_matchbox-panel ?= "20060727"
SRCDATE_matchbox-panel-manager ?= "20060612"
SRCDATE_matchbox-stroke ?= "20060612"
SRCDATE_matchbox-themes-extra ?= "20060612"
SRCDATE_matchbox-wm ?= "20060729"
SRCDATE_libmatchbox ?= "20060729"
SRCDATE_settings-daemon ?= "20060818"
SRCDATE_tslib ?= "20051101"
SRCDATE_libxext ?= "20051101"
SRCDATE_renderext ?= "20051101"
SRCDATE_libxrender ?= "20051101"
SRCDATE_fixesext ?= "20051101"
SRCDATE_damageext ?= "20051101"
SRCDATE_compositeext ?= "20051101"
SRCDATE_xcalibrateext ?= "20051101"
SRCDATE_recordext ?= "20051101"
SRCDATE_libfakekey ?= "20051101"
SRCDATE_xmodmap ?= "20051101"
SRCDATE_libxrandr ?= "20051101"
SRCDATE_libxtst ?= "20051101"
SRCDATE_xcalibrate ?= "20060312"
SRCDATE_libxmu ?= "20051115"
SRCDATE_xdpyinfo ?= "20051115"
SRCDATE_xauth ?= "20060120"
SRCDATE_xserver-kdrive = "20050207"
SRCDATE_qemu-native ?= "20060723"
SRCDATE_oprofile ?= "20061011"
SRCDATE_zaurusd ?= "20060729"

# SRCDATE_psplash = "now"

#
# Preferred Versions:
#
PREFERRED_VERSION_matchbox ?= "0.9.1"
PREFERRED_VERSION_matchbox-applet-inputmanager ?= "0.6"
PREFERRED_VERSION_matchbox-applet-startup-monitor ?= "0.1"
PREFERRED_VERSION_matchbox-common ?= "0.9.1+svn${SRCDATE}"
PREFERRED_VERSION_matchbox-config-gtk ?= "0.0+svn${SRCDATE}"
PREFERRED_VERSION_matchbox-desktop ?= "0.9.1+svn${SRCDATE}"
PREFERRED_VERSION_matchbox-keyboard ?= "0.0+svn${SRCDATE}"
PREFERRED_VERSION_matchbox-panel ?= "0.9.2+svn${SRCDATE}"
PREFERRED_VERSION_matchbox-stroke ?= "0.0+svn${SRCDATE}"
PREFERRED_VERSION_matchbox-themes-extra ?= "0.3+svn${SRCDATE}"
PREFERRED_VERSION_matchbox-wm ?= "1.1"
PREFERRED_VERSION_libmatchbox ?= "1.9"

PREFERRED_VERSION_glib-2.0 ?= "2.10.3"
PREFERRED_VERSION_glib-2.0-native ?= "2.10.3"
PREFERRED_VERSION_atk ?= "1.10.3"
PREFERRED_VERSION_cairo = "1.0.4"
PREFERRED_VERSION_gtk+ ?= "2.6.8"
#PREFERRED_VERSION_gtk+ ?= "2.8.16"
PREFERRED_VERSION_pango ?= "1.10.2"

PREFERRED_VERSION_dbus ?= "0.60"
PREFERRED_VERSION_gnome-vfs-dbus ?= "2.12.0+cvs${SRCDATE}"

PREFERRED_VERSION_dillo2 ?= "0.6.6"
PREFERRED_VERSION_evince ?= "0.3.2"
PREFERRED_VERSION_firefox ?= "1.0"
PREFERRED_VERSION_gaim ?= "2.0.0-cvs-mco1-20050904"
PREFERRED_VERSION_gtk2-theme-angelistic ?= "0.3"
PREFERRED_VERSION_keylaunch ?= "2.0.7"
PREFERRED_VERSION_librsvg ?= "2.6.5"
PREFERRED_VERSION_libgsm ?= "1.0.10"
PREFERRED_VERSION_libschedule ?= "0.15"
PREFERRED_VERSION_linphone-hh ?= "0.12.2.hh1"
PREFERRED_VERSION_linphone ?= "0.12.2"
PREFERRED_VERSION_minilite ?= "0.49"
PREFERRED_VERSION_minimo ?= "0.0+cvs${SRCDATE_minimo}"
PREFERRED_VERSION_poppler ?= "0.3.3"
PREFERRED_VERSION_rosetta ?= "0.0+cvs${SRCDATE}"
PREFERRED_VERSION_rxvt-unicode ?= "5.6"
PREFERRED_VERSION_xcursor-transparent-theme ?= "0.1.1"
PREFERRED_VERSION_xdemineur ?= "2.1.1"
PREFERRED_VERSION_xextensions ?= "1.0.1"


PREFERRED_VERSION_xmonobut ?= "0.4"
PREFERRED_VERSION_xprop ?= "0.0+cvs${SRCDATE}" 
PREFERRED_VERSION_xst ?= "0.15"
PREFERRED_VERSION_oprofile ?= "0.9.1+cvs${SRCDATE}"

require conf/distro/include/preferred-xorg-versions.inc

PCMCIA_MANAGER ?= "pcmciautils"

CVS_TARBALL_STASH += "http://www.o-hand.com/~richard/poky/sources/"

IMAGE_LINGUAS = "en-gb"

DISTRO_FEATURES = "alsa bluetooth ext2 irda pcmcia usbgadget usbhost wifi"
DISTRO_FEATURES_cmx270 = "alsa bluetooth ext2 irda pcmcia usbgadget usbhost"
